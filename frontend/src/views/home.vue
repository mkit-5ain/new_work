<template>
    <section class="home is-active">
        <div class="intro-wrap">
            <div class="name-wrap">
                <ul class="name-list">
                    <li class="list-item"><span data-char="M">M</span></li>
                    <li class="list-item"><span data-char="x">x</span></li>
                    <li class="list-item"><span data-char="x">x</span></li>
                    <li class="list-item"><span data-char="e">e</span></li>
                    <li class="list-item"><span data-char="m">m</span></li>
                    <li class="list-item"><span data-char="e">e</span></li>
                    <li class="list-item"><span data-char="n">n</span></li>
                    <li class="list-item"><span data-char="t">t</span></li>
                </ul>
            </div>
        </div>
        <div class="transition-wrap">
            <div class="transition-image image-scale-first">
                <img src="../assets/image/common/astro.webp" alt="">
            </div>
            <div class="circle">
                <img src="../assets/image/common/circle.svg" alt="">
            </div>
        </div>
         <div class="transition-wrap">
            <div class="transition-image image-scale-second">
                <img src="../assets/image/common/astro.webp" alt="">
            </div>
            <div class="reverse-circle">
                <img src="../assets/image/common/circle.svg" alt="">
            </div>
        </div>
        <div class="project">
            <div class="action">
                <div class="inner-wrap">
                    <div class="title"><span>Lorem ipsum dolor</span></div>
                    <div class="text-marquee">
                        <p class="text">
                            <span>CREATIVE</span> 
                            <span>TRANSITION</span>
                            <span>JAVASCRIPT</span>
                            <span>EFFECTS</span>
                            <span>HTML5</span>
                            <span>CSS3</span>
                            <span>JQUERY</span>
                            <span>ANIMATION</span>
                            <span>GOLF-WEAR</span>
                        </p>
                        <p class="text">
                            <span>CREATIVE</span> 
                            <span>TRANSITION</span>
                            <span>JAVASCRIPT</span>
                            <span>EFFECTS</span>
                            <span>HTML5</span>
                            <span>CSS3</span>
                            <span>JQUERY</span>
                            <span>ANIMATION</span>
                            <span>GOLF-WEAR</span>
                        </p>
                    </div>
                </div>
                <div class="hover-image"><img src="../assets/image/common/banner/sample.jpg" alt=""></div>
            </div>
            <div class="action">
                <div class="inner-wrap">
                    <div class="title"><span>Lorem ipsum dolor</span></div>
                    <div class="text-marquee">
                        <p class="text">
                            <span>CREATIVE</span> 
                            <span>TRANSITION</span>
                            <span>JAVASCRIPT</span>
                            <span>EFFECTS</span>
                            <span>HTML5</span>
                            <span>CSS3</span>
                            <span>JQUERY</span>
                            <span>ANIMATION</span>
                            <span>GOLF-WEAR</span>
                        </p>
                        <p class="text">
                            <span>CREATIVE</span> 
                            <span>TRANSITION</span>
                            <span>JAVASCRIPT</span>
                            <span>EFFECTS</span>
                            <span>HTML5</span>
                            <span>CSS3</span>
                            <span>JQUERY</span>
                            <span>ANIMATION</span>
                            <span>GOLF-WEAR</span>
                        </p>
                    </div>
                </div>
                <div class="hover-image"><img src="../assets/image/common/banner/sample.jpg" alt=""></div>
            </div>
            <div class="action">
                <div class="inner-wrap">
                    <div class="title"><span>Lorem ipsum dolor</span></div>
                    <div class="text-marquee">
                        <p class="text">
                            <span>CREATIVE</span> 
                            <span>TRANSITION</span>
                            <span>JAVASCRIPT</span>
                            <span>EFFECTS</span>
                            <span>HTML5</span>
                            <span>CSS3</span>
                            <span>JQUERY</span>
                            <span>ANIMATION</span>
                            <span>GOLF-WEAR</span>
                        </p>
                        <p class="text">
                            <span>CREATIVE</span> 
                            <span>TRANSITION</span>
                            <span>JAVASCRIPT</span>
                            <span>EFFECTS</span>
                            <span>HTML5</span>
                            <span>CSS3</span>
                            <span>JQUERY</span>
                            <span>ANIMATION</span>
                            <span>GOLF-WEAR</span>
                        </p>
                    </div>
                </div>
                <div class="hover-image"><img src="../assets/image/common/banner/sample.jpg" alt=""></div>
            </div>
            <div class="action">
                <div class="inner-wrap">
                    <div class="title"><span>Lorem ipsum dolor</span></div>
                    <div class="text-marquee">
                        <p class="text">
                            <span>CREATIVE</span> 
                            <span>TRANSITION</span>
                            <span>JAVASCRIPT</span>
                            <span>EFFECTS</span>
                            <span>HTML5</span>
                            <span>CSS3</span>
                            <span>JQUERY</span>
                            <span>ANIMATION</span>
                            <span>GOLF-WEAR</span>
                        </p>
                        <p class="text">
                            <span>CREATIVE</span> 
                            <span>TRANSITION</span>
                            <span>JAVASCRIPT</span>
                            <span>EFFECTS</span>
                            <span>HTML5</span>
                            <span>CSS3</span>
                            <span>JQUERY</span>
                            <span>ANIMATION</span>
                            <span>GOLF-WEAR</span>
                        </p>
                    </div>
                </div>
                <div class="hover-image"><img src="../assets/image/common/banner/sample.jpg" alt=""></div>
            </div>
            <div class="action">
                <div class="inner-wrap">
                    <div class="title"><span>Lorem ipsum dolor</span></div>
                    <div class="text-marquee">
                        <p class="text">
                            <span>CREATIVE</span> 
                            <span>TRANSITION</span>
                            <span>JAVASCRIPT</span>
                            <span>EFFECTS</span>
                            <span>HTML5</span>
                            <span>CSS3</span>
                            <span>JQUERY</span>
                            <span>ANIMATION</span>
                            <span>GOLF-WEAR</span>
                        </p>
                        <p class="text">
                            <span>CREATIVE</span> 
                            <span>TRANSITION</span>
                            <span>JAVASCRIPT</span>
                            <span>EFFECTS</span>
                            <span>HTML5</span>
                            <span>CSS3</span>
                            <span>JQUERY</span>
                            <span>ANIMATION</span>
                            <span>GOLF-WEAR</span>
                        </p>
                    </div>
                </div>
                <div class="hover-image"><img src="../assets/image/common/banner/sample.jpg" alt=""></div>
            </div>
            <div class="action">
                <div class="inner-wrap">
                    <div class="title"><span>Lorem ipsum dolor</span></div>
                    <div class="text-marquee">
                        <p class="text">
                            <span>CREATIVE</span> 
                            <span>TRANSITION</span>
                            <span>JAVASCRIPT</span>
                            <span>EFFECTS</span>
                            <span>HTML5</span>
                            <span>CSS3</span>
                            <span>JQUERY</span>
                            <span>ANIMATION</span>
                            <span>GOLF-WEAR</span>
                        </p>
                        <p class="text">
                            <span>CREATIVE</span> 
                            <span>TRANSITION</span>
                            <span>JAVASCRIPT</span>
                            <span>EFFECTS</span>
                            <span>HTML5</span>
                            <span>CSS3</span>
                            <span>JQUERY</span>
                            <span>ANIMATION</span>
                            <span>GOLF-WEAR</span>
                        </p>
                    </div>
                </div>
                <div class="hover-image"><img src="../assets/image/common/banner/sample.jpg" alt=""></div>
            </div>
        </div>
        <div class="image-collection">
            <div class="image-wrap">
                <img src="../assets/image/common/banner/noice/noice-01.jpg" alt="">
                <img src="../assets/image/common/banner/noice/noice-10.jpg" alt="">
                
                <img src="../assets/image/common/banner/noice/noice-03.jpg" alt="">
            </div>
            <div class="image-wrap">
                <img src="../assets/image/common/banner/noice/noice-12.jpg" alt="">
                <img src="../assets/image/common/banner/noice/noice-13.jpg" alt="">
                <img src="../assets/image/common/banner/noice/noice-11.jpg" alt="">
            </div>
            <div class="image-wrap">
                <img src="../assets/image/common/banner/noice/noice-06.jpg" alt="">
                <img src="../assets/image/common/banner/noice/noice-07.jpg" alt="">
                <img src="../assets/image/common/banner/noice/noice-08.jpg" alt="">
            </div>
            <div class="image-wrap">
                <img src="../assets/image/common/banner/noice/noice-09.jpg" alt="">
                <img src="../assets/image/common/banner/noice/noice-02.jpg" alt="">
                <img src="../assets/image/common/banner/noice/noice-14.jpg" alt="">
            </div>
            <div class="image-wrap">
                <img src="../assets/image/common/banner/noice/noice-04.jpg" alt="">
                <img src="../assets/image/common/banner/noice/noice-05.jpg" alt="">
                <img src="../assets/image/common/banner/noice/noice-06.jpg" alt="">
            </div>
        </div>
        <!-- <div class="space"></div> -->
        <!-- <div class="age">
            <div class="front">
                <span>0</span>
                <span>1</span>
                <span>2</span>
                <span>3</span>
            </div>
            <div class="back">
                <span>3</span>
                <span>4</span>
                <span>5</span>
                <span>6</span>
            </div>
            <div class="text">AGE</div>
        </div>
        
        <router-link class="contact bullet" to="/work">
            <p>+</p>
            <p>View My Work</p>
        </router-link> -->
    </section>
</template>
<script>
    import gsap from 'gsap';
    import ScrollTrigger from "gsap/ScrollTrigger";
    gsap.registerPlugin(ScrollTrigger);
    export default {
        name: 'home',
        mounted:function () {
            this.parallax();
            this.scrollTrigger();
        },
        methods: {
            parallax () {
                let observer = new IntersectionObserver( (e) => {
                    threshold: [0, 0.25, 0.5, 0.75, 1];
                    e.forEach( (section) => {
                        if (section.isIntersecting) {
                            section.target.classList.add('active');
                        }
                    }); 
                })
                
                let section = document.querySelectorAll('.action');
                section.forEach(sections => observer.observe(sections));
            },
            mouseFollow () {
                const eyeRightPupil = document.querySelector('.eye-right-pupil');
                const eyeLeftPupil = document.querySelector('.eye-left-pupil');
                const eyeLeftInner = document.querySelector('.eye-left-inner');
                const innerEyeWidth = eyeLeftInner.getBoundingClientRect().width;
                const innerEyeHeight = eyeLeftInner.getBoundingClientRect().height;
                const pupilWidth = eyeLeftPupil.getBoundingClientRect().width;
                const pupilHeight = eyeLeftPupil.getBoundingClientRect().height;
                const xMovement = (innerEyeWidth - pupilWidth)/2;
                const yMovement = (innerEyeHeight - pupilHeight)/2;

                window.addEventListener('mousemove', updateEyePosition);

                function updateEyePosition(event) {
                    const posX = ((event.clientX / document.body.clientWidth) * 2 - 1) * xMovement;
                    const posY = ((event.clientY / document.body.clientHeight) * 2 - 1) * yMovement;

                    eyeLeftPupil.style.transform = `translate(${posX}px, ${posY}px)`;
                    eyeRightPupil.style.transform = `translate(${posX}px, ${posY}px)`;
                }
            },
            scrollTrigger () {
                smoothScroll('.container');
                function smoothScroll(content, viewport, smoothness) {
                    content = gsap.utils.toArray(content)[0];
                    smoothness = smoothness || 2;

                    gsap.set(viewport || content.parentNode, {overflow: "hidden", position: "fixed", height: "100%", width: "100%", top: 0, left: 0, right: 0, bottom: 0});
                    gsap.set(content, {overflow: "visible", width: "100%"});

                    let getProp = gsap.getProperty(content),
                        setProp = gsap.quickSetter(content, "y", "px"),
                        setScroll = ScrollTrigger.getScrollFunc(window),
                        removeScroll = () => content.style.overflow = "visible",
                        killScrub = trigger => {
                            let scrub = trigger.getTween ? trigger.getTween() : gsap.getTweensOf(trigger.animation)[0]; 
                            scrub && scrub.pause();
                            trigger.animation.progress(trigger.progress);
                        },
                        height, isProxyScrolling;

                    function refreshHeight() {
                        height = content.clientHeight;
                        content.style.overflow = "visible"
                        document.body.style.height = height + "px";
                        return height - document.documentElement.clientHeight;
                    }

                    ScrollTrigger.addEventListener("refresh", () => {
                        removeScroll();
                        requestAnimationFrame(removeScroll);
                    });

                    ScrollTrigger.defaults({scroller: content});
                    ScrollTrigger.prototype.update = p => p;

                    ScrollTrigger.scrollerProxy(content, {
                        scrollTop(value) {
                            if (arguments.length) {
                                isProxyScrolling = true;
                                setProp(-value);
                                setScroll(value);
                                return;
                            }
                            return -getProp("y");
                        },
                        scrollHeight: () => document.body.scrollHeight,
                        getBoundingClientRect() {
                            return {top: 0, left: 0, width: window.innerWidth, height: window.innerHeight};
                        }
                    });

                    return ScrollTrigger.create({
                        animation: gsap.fromTo(content, {y:0}, {
                            y: () => document.documentElement.clientHeight - height,
                            ease: "none",
                            onUpdate: ScrollTrigger.update
                        }),
                        scroller: window,
                        invalidateOnRefresh: true,
                        start: 0,
                        end: refreshHeight,
                        refreshPriority: -999,
                        scrub: smoothness,
                        onUpdate: self => {
                            if (isProxyScrolling) {
                                killScrub(self);
                                isProxyScrolling = false;
                            }
                        },
                        onRefresh: killScrub
                    });
                }

                gsap.fromTo('.image-scale-first', {
                    xPercent: 30,
                    yPercent: 70,
                    scale: 2,
                    ease: "true",
                    scrollTrigger: {
                        trigger: ".image-scale-first",
                        start: "top 50%",
                        end: "bottom 50%",
                        scrub: true,
                        // markers:true
                    }
                },{
                    xPercent: -20,
                    yPercent: 50,
                    scale: .3,
                    ease: "true",
                    scrollTrigger: {
                        trigger: ".image-scale-first",
                        start: "top 50%",
                        end: "bottom 50%",
                        scrub: true
                    }
                });

                gsap.fromTo('.image-scale-second', {
                    xPercent: 30,
                    yPercent: 70,
                    scale: 2,
                    ease: "true",
                    scrollTrigger: {
                        trigger: ".image-scale-second",
                        start: "top 50%",
                        end: "bottom 50%",
                        scrub: true,
                        // markers:true
                    }
                },{
                    xPercent: -20,
                    yPercent: 50,
                    scale: .3,
                    ease: "true",
                    scrollTrigger: {
                        trigger: ".image-scale-second",
                        start: "top 50%",
                        end: "bottom 50%",
                        scrub: true
                    }
                });

                gsap.to('.circle', {
                    rotation: 50,
                    scale: 2,
                    opacity: 0,
                    scrollTrigger: {
                        trigger: ".circle",
                        start: "top 50%",
                        end: "bottom 50%",
                        scrub: true,
                    }
                });

                gsap.to('.reverse-circle', {
                    rotation: -50,
                    scale: 2,
                    opacity: 0,
                    scrollTrigger: {
                        trigger: ".reverse-circle",
                        start: "top 50%",
                        end: "bottom 50%",
                        scrub: true
                    }
                });
                
                gsap.to('.image-collection .image-wrap:nth-child(even)', {
                    yPercent: -15,
                    opacity: 1,
                    scrollTrigger: {
                        trigger: ".image-collection .image-wrap:nth-child(even)",
                        scrub: true
                    }
                });
                 gsap.from('.image-collection .image-wrap:nth-child(odd)', {
                    yPercent: -15,
                    opacity: 1,
                    scrollTrigger: {
                        trigger: ".image-collection .image-wrap:nth-child(odd)",
                        scrub: true
                    }
                });

                gsap.to('.project .action:nth-child(1) .hover-image', {
                    yPercent: -30,
                    scrollTrigger: {
                        trigger: ".project .action:nth-child(1) .hover-image",
                        scrub: true,
                        markers:true
                    }
                });
                
                gsap.from('.project .action:nth-child(2) .hover-image', {
                    yPercent: -30,
                    scrollTrigger: {
                        trigger: ".project .action:nth-child(2) .hover-image",
                        scrub: true
                    }
                });

                gsap.to('.project .action:nth-child(3) .hover-image', {
                    yPercent: -30,
                    scrollTrigger: {
                        trigger: ".project .action:nth-child(3) .hover-image",
                        scrub: true,
                        markers:true
                    }
                });
                
                gsap.from('.project .action:nth-child(4) .hover-image', {
                    yPercent: -30,
                    scrollTrigger: {
                        trigger: ".project .action:nth-child(4) .hover-image",
                        scrub: true
                    }
                });

                gsap.to('.project .action:nth-child(5) .hover-image', {
                    yPercent: -30,
                    scrollTrigger: {
                        trigger: ".project .action:nth-child(5) .hover-image",
                        scrub: true,
                        markers:true
                    }
                });
                
                gsap.from('.project .action:nth-child(6) .hover-image', {
                    yPercent: -30,
                    scrollTrigger: {
                        trigger: ".project .action:nth-child(6) .hover-image",
                        scrub: true
                    }
                });
            }
        }
    }
</script>
<style lang="scss" scoped>
    .home { position: relative;
        &:before {
            content: '';
            position: absolute;
            top: 0px;
            left: 0px;
            width: 100%;
            background: #df114f;
            z-index: 1;
        }
        .transition-wrap { position: relative; width: 100%;
            .circle { pointer-events: none; }
            .reverse-circle { pointer-events: none; }
            .transition-image { position: absolute; top: 0%; left: 27%; }
        }
        .name-wrap {  display: flex; height: 100vh; align-items: center; justify-content: center;
            .name-list {
                display: flex;
                position: relative;
                font-size: 250px;
                font-variation-settings: "wght" 800, "wdth" 125;
                justify-content: center;
                transition: 1s ease;
                @keyframes line-animation {
                    to {
                        width: 0vw;
                    }
                    from {
                        width: 30vw;
                    }
                }
                &:before {
                    content: "";
                    position: absolute;
                    top: -100%;
                    left: 20%;
                    z-index: -1;
                    width: 30vw;
                    height: 1px;
                    background: linear-gradient(45deg, #ffc000, transparent);
                    transform: rotate(140deg);
                    transform-origin: top left;
                    // animation: 5s ease line-animation alternate;
                }
                &:after {
                    content: "";
                    position: absolute;
                    bottom: 70px;
                    right: -85px;
                    width: 59px;
                    height: 59px;
                    background: #df114f;
                    border-radius: 100%;
                    box-shadow: 1px 1px 5px 2px #b35656;
                }
                .list-item {
                    span { display: block; position: relative; color: #df114f; transition: .2s ease; 
                        &:before {
                            content: attr(data-char);
                            position: absolute;
                            top: 0px;
                            left: 0px;
                            color: #efc449;
                            transition: .2s ease; 
                        }
                        &:hover { 
                            &:before { 
                                transform: scale(1.05) rotate(-1deg);
                                transform-origin: top left;
                                transition: .2s ease; 
                            }
                            &:after {
                                content: attr(data-char);
                                position: absolute;
                                top: 0px;
                                left: 0px;
                                Z-index: -1;
                                filter: drop-shadow(0px 0px 20px #df114f);
                            }
                        }
                    }
                }
            }
        }
        .age { display: flex; height: 12.5vw; justify-content: center; align-items: flex-end; overflow: hidden; 
            .front,.back,.text { font-size: 10.41667vw; }
            .front,.back { display: flex; text-align: center; flex-direction: column; }
            .front { animation: 1.5s cubic-bezier(0.4, 0, 1, 1) frontAge forwards; }
            .back { animation: 1.5s cubic-bezier(0.4, 0, 1, 1) backAge forwards; }
        }
        .contact { 
            display: flex;
            position: relative;
            font-size: 100px;
            transition: .5s cubic-bezier(0.4, 0, 1, 1); 
            align-items: center;
            gap: 30px;
            font-variation-settings: 'opsz' 10;
            &:hover { font-variation-settings: 'opsz' 100;
                p {
                    &:nth-child(1) { transition: .5s cubic-bezier(0.4, 0, 1, 1); transform: rotate(360deg); }
                }
            }
            p {  
                &:nth-child(1) { transition: .5s cubic-bezier(0.4, 0, 1, 1); height: 51px; line-height: 40px; }
            }
        }
        .space { 
                position: absolute;
                top: 25vw;
                right: -25vw;
                width: 50vw;
                height: 50vw;
                border-radius: 100%;
                background: #333;
                overflow: hidden;
            &:before {
                content: "";
                position: absolute;
                top: 0;
                left: 0px;
                width: 50vw;
                height: 50vw;
                background: url('../assets/image/common/space-bg.svg') 0 0 repeat;
                background-size: 400px;
                animation: 295s spaceAnimate infinite alternate;
            }
        }
        @keyframes spaceAnimate {
            to {
                transform: rotate(0deg);
            }
            from {
                transform: rotate(-360deg);
            }
        }
        .work { 
            .work-list { 
                .list-item { display: flex; flex-wrap: wrap; flex-direction: row;
                    &:nth-child(even) {
                        flex-direction: row-reverse;
                    }
                    .image { 
                        position: sticky;
                        top: 0px;
                        left: 0px;
                        width: 50%; 
                        align-self: flex-start;
                        img { width: 100%;}
                    } 
                    .description { width: 50%; min-height: 150vh; } 
                }
            }
        } 
        .project { 
            display: flex;
            max-width: 1920px; 
            margin: 25vw 10vw; 
            flex-direction: column;
            flex-wrap: wrap;
            align-items: center;
            gap: 300px;
            .action { position: relative; margin: 300px 0px;
                &:before {
                    content: "";
                    position: absolute;
                    bottom: 0px;
                    left: -5px;
                    width: 10px;
                    height: 19px;
                    background: #040404;
                    opacity: 1;
                    z-index: 1;
                    box-shadow: 0px 0px 30px 30px #040404;
                }
                &:after { 
                    content: "";
                    position: absolute;
                    bottom: 0px;
                    right: -5px;
                    width: 10px;
                    height: 19px;
                    background: #040404;
                    opacity: 1;
                    z-index: 1;
                    box-shadow: 0px 0px 30px 30px #040404;
                }
                &:nth-child(odd) { margin-left: auto; }
                &:nth-child(even) { margin-right: auto; }
                &.active {
                    .hover-image {
                        &:after { transform: translateY(-100%); }
                    }
                }
                &:hover {
                    .hover-image { 
                        img { filter: sepia(0.5) blur(0px); }
                    }
                }
            }
            .inner-wrap { position: relative; overflow: hidden; 
                .title { 
                    padding-bottom: 30px; 
                    font-size: 100px; 
                    font-weight: bold; 
                    color: #efc449;
                    overflow: hidden; 
                    // mix-blend-mode: saturation;
                }
                .text-marquee { 
                    display: flex; 
                    position: absolute;
                    bottom: 0px;
                    font-size: 16px;
                    gap: 5px;
                    z-index: -2;
                    .text { color: #efc449; animation: 10s linear text-marquee infinite; white-space: nowrap; 
                        span { padding: 0px 10px; }
                    }
                };
                @keyframes text-marquee {
                    to {
                        transform: translateX(0%);
                    }

                    from {
                        transform: translateX(calc(-100% - 5px));
                    }
                }
            }
            .hover-image { 
                position: absolute;
                top: 50%;
                left: 50%;
                z-index: -1;
                transform: translate(-50%, -50%);
                transition: 0.5s ease;
                overflow: hidden;
                &:after {
                    content: '';
                    position: absolute;
                    top: 0px;
                    right: 0px;
                    width: 100%;
                    height: 100%;
                    background: #040404;
                    transform: translateY(0%);
                    transition: 1s ease;
                }
                img { width: 400px; filter: sepia(0.5) blur(4px); }
            }
        }
    }
</style>
